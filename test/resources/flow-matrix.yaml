on: [pull_request]

jobs:
  build-chain:
    runs-on: ubuntu-latest
    name: Build Chain Flow
    steps:
      - uses: actions/checkout@v2
      - name: Build Chain
        id: build-chain
        uses: kiegroup/github-action-build-chain@master
        with:
          parent-dependencies: |
            lienzo-core
            groupx/errai
            groupy/projectx@${{ sourceBranch }}:master
          child-dependencies: |
            appformer@${{ sourceBranch }}:${{ matrix.targetBranch }}
            lienzo-tests
          build-command: |
            echo ${{ os }}
            echo 'without matrix'
          build-command-upstream: |
            echo ${{ os }}
            echo ${{ matrix.version }}
            echo 'without matrix'
          build-command-downstream: |
            echo 'without matrix'
            echo ${{ os }}
          matrix-variables: |
            os: ${{ matrix.os }}
            matrix.version: ${{ matrix.version }}
            sourceBranch: ${{ matrix.sourceBranch }}
            matrix.targetBranch: ${{ matrix.sourceBranch }}
          workflow-file-name: "flow-matrix.yaml"
        env:
          GITHUB_TOKEN: "${{ secrets.GITHUB_TOKEN }}"
